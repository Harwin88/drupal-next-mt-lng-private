# Values in this file override the default values of our helm chart.
#
# See https://github.com/wunderio/charts/blob/master/frontend/values.yaml
# for all possible options.
#
#
services:
  node:
    exposedRoute: '/'
    port: 3000
    env:
      NEXT_PUBLIC_DRUPAL_BASE_URL: https://${DRUPAL_RELEASE_NAME}.${PROJECT}.${DOMAIN}
      NEXT_PUBLIC_FRONTEND_URL: https://${NEXT_RELEASE_NAME}.${PROJECT}.${DOMAIN}
      NEXT_IMAGE_DOMAIN: ${DRUPAL_RELEASE_NAME}.${PROJECT}.${DOMAIN}
      NEXTAUTH_URL: https://${NEXT_RELEASE_NAME}.${PROJECT}.${DOMAIN}

nginx:
  content_security_policy: >- # Lines below are joined without line breaks.
    upgrade-insecure-requests;
    default-src 'none';
    script-src 'self' youtube.com https://www.youtube.com;
    frame-src youtube.com https://www.youtube.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' https://${DRUPAL_RELEASE_NAME}.${PROJECT}.${DOMAIN} https://i.ytimg.com;
    font-src 'self' https://${DRUPAL_RELEASE_NAME}.${PROJECT}.${DOMAIN};
    frame-ancestors 'self' https://${DRUPAL_RELEASE_NAME}.${PROJECT}.${DOMAIN};
    base-uri 'self';
    connect-src 'self';
    form-action 'self';
